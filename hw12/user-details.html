<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .information {
            text-align: center;
        }

        .pcompany {
            background-color: darkcyan;
        }

        .padres {
            background-color: burlywood;
        }

        .pcontacts {
            background-color: cornflowerblue;
        }
    </style>

</head>
<body>
<h1 class="information">Information of users</h1>
<a href="index.html">Back</a>
<script>

    // В index.html-->
    // <!-- 1 отримати масив об'єктів з endpoint`а https://jsonplaceholder.typicode.com/users-->
    // <!-- 2 Вивести id,name всіх user в index.html. Окремий блок для кожного user.-->
    // <!-- 3 Додати кожному блоку кнопку/посилання , при кліку на яку відбувається перехід  на сторінку user-details.html, котра має детальну інфорацію про об'єкт на який клікнули-->
    // <!-- -->
    // <!-- -->
    // <!-- На странице user-details.html:-->
    // <!-- 4 Вивести всю, без виключення, інформацію про об'єкт user на який клікнули-->
    // <!-- 5 Додати кнопку "post of current user", при кліку на яку, з'являються title всіх постів поточного юзера-->
    // <!-- (для получения постов используйте эндпоинт https://jsonplaceholder.typicode.com/users/USER_ID/posts)-->
    //     <!-- 6 Каждому посту додати кнопку/посилання, при кліку на яку відбувається перехід на сторінку post-details.html, котра має детальну інфу про поточний пост.-->
        <!-- -->
    console.log(location)
    let userid = new URL(location.href).searchParams.get('id')
    let newURL = 'https://jsonplaceholder.typicode.com/users/' + userid
    fetch(newURL)
        .then(response => response.json())
        .then(users => {
            console.log(users)
            let div = document.createElement('div')
            document.body.appendChild(div)
            let h3 = document.createElement('h3')
            h3.innerText = `id - ${users.id}
                        Name: ${users.name}`
            let pcontacts = document.createElement('p')
            let user1 = users
            pcontacts.classList.add('pcontacts')
            pcontacts.innerText = `Contacts
                        Email - ${user1.email}
                        Phone - ${user1.phone}
                        Username - ${user1.username}
                        Website - ${user1.website}   `
            let padres = document.createElement('p')
            let address = users.address
            padres.classList.add('padres')
            padres.innerText = `Address
                        City: ${address.city}
                        Street: ${address.street}
                        Suite: ${address.suite}
                        Zipcode: ${address.zipcode}
                        Geo: lat:${address.geo.lat} lng:${address.geo.lng}
                        `
            let pcompany = document.createElement('p')
            pcompany.classList.add('pcompany')
            let company = users.company
            pcompany.innerText = `Company
                        bs: ${company.bs}
                        Catch Phrase: ${company.catchPhrase}
                        Name: '${company.name}'
                        `
            div.append(h3, pcontacts, padres, pcompany)
            fetch('https://jsonplaceholder.typicode.com/users/${Id}/posts')
                .then(response => response.json())
                .then(json => console.log(json))
            let URL1 = `https://jsonplaceholder.typicode.com/users/${1}/posts`
            fetch(URL1)
                .then(res => res.json())
                .then(posts => {
                    for (const post of posts) {
                        console.log(post)
                        let div = document.createElement('div')
                        document.body.append(div)
                        let p = document.createElement('p')
                        p.innerText = `id: ${post.id}
                title: ${post.title}`
                        let a = document.createElement('a')
                        a.href = `post-details.html?id=${post.title} ${post.id}`
                        a.innerText = 'post of current user'
                        a.addEventListener('click',()=>{
                            location.href = 'post-details.html?id=' + post.title
                        })
                        let hr =document.createElement('hr')
                        div.append(p,a,hr)

                    }

                })

        })


</script>
</body>
</html>